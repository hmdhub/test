[TOC]

---

# 正则表达式

### 1. 正则表达式概述

**1.1 正则表达式概念及使用场景** 

```python
# 正则概念
正则用于从字符串中提取子字符串使用
正则表达式是一门单独的学科, 不属于python独有, 其他语言中也可以使用正则

# 正则表达式使用场景
表单验证(手机号验证, 账号验证, 密码验证, 邮箱验证)
爬虫
```

### 2. 正则表达式基础

**2.1 元字符**

```python
(1) .(点): 匹配任意字符, 换行符除外\n ****
(2) []: 字符组, 一些特殊的字符组如下: ****
    [a-z]: a到z的任意小写字母
    [A-Z]: A到Z的任意大写字母
    [0-9]: 0到9的任意数字
    [^a-g]
(3) \d: 匹配任意数字  *****
(4) \D: 匹配非数字
(5) \s: 匹配空白符(测试一下)
(6) \S: 匹配非空白符---(除了空格啥都能匹配)
(7) \w: 匹配数字字母下划线 ****
(8) \W: 匹配非数字字母下划线
(9) ^: 以什么开头  *****
(10) $: 以什么结尾  *****
    \t 代表空格符
    \n 代表换行的意思
```

```python
import re
# rematch(正则表达式，字符串)
# 从字符串开头进行匹配, 如果开头就不符合则匹配不到结果返回None,
# 如果匹配到结果后返回一个对象, 使用group进行取值

# {m} :匹配m个
# {m,n}: 匹配m到n个,只能匹配到n的位置
# {m,}:匹配至少m个
# {,n}：匹配至多n个


# \d 匹配任意数字
# \d 需要一个字符能够匹配数字0到9的一个字符
match()这个方法从开始匹配，不满足直接返回None
re.search(r"激情\d",str1) 从头开始匹配，只返回一个结果，就是只匹配一次
str1 = "速度与激情10"
ret = re.match(r"激情\d\d",str1)
print(ret)  # <re.Match object; span=(0, 6), match='速度与激情1'>
print(ret.group())  # 速度与激情1

# \D 非数字都可以匹配(写一个只能匹配一个)
str2="速度与激情@@@￥"
ret = re.match(r"速度与激情\D{0,}",str2)
print(ret.group())

# [0-9] 匹配0-9任意一个数字
ret = re.match(r'速度与激情[0-9]{2}',str1)
print(ret.group())

# [1-37-9] 代表123 789直接不连续
# [1-3,7-9]代表123 789直接不连续
ret = re.match(r'速度与激情[1-37-9]','速度与激情3')
print(ret.group())

# [a-z]：匹配到小写
ret = re.match(r'速度与激情[a-z]','速度与激情a')
print(ret.group())

# [A-Z]:匹配到大写
ret = re.match(r'速度与激情[A-Z]','速度与激情A')
print(ret.group())

# [1-9a-zA-Z] 有啥配啥
# 匹配一个
ret = re.match(r'速度与激情[1-9a-zA-Z]','速度与激情aDfgU')
print(ret.group())
# 匹配4个
ret = re.match(r'速度与激情[1-9a-zA-Z]{4}','速度与激情aDfgU')
print(ret.group())

# \w 匹配数字字母下划线 ---大小写汉字
# 匹配一个
ret = re.match(r'速度与激情\w','速度与激情aDfgU')
print(ret.group())
# 匹配四个
ret = re.match(r'速度与激情\w{4}','速度与激情aDfgU')
print(ret.group())

# \W 匹配非数字字母下划线 特殊符号
ret = re.match(r'\W','@@@@')
print(ret.group())

# \s 匹配空白符
ret = re.match(r'\s','')
print(ret.group())
# \S 匹配非空白符 ----啥都可以(除了空白符)
ret = re.match(r'\S','11aacccDdd')
print(ret.group())
# 匹配空白就报错
```

**2.2 量词**

```python
*: 匹配0个或无数个
+: 匹配1次过无数个
?: 匹配1个或0个
{m}: 匹配m个
{m,n}: 匹配m个到n个
{m,}: 匹配至少m个
{,n}: 匹配至多n个
```

**2.3 贪婪匹配与非贪婪匹配**

```python
(1).贪婪匹配是指在正则匹配的过程中尽量往多了匹配, 正则表达式默认是贪婪匹配.
(2).非贪婪匹配是指一旦满足正则表达式,就将匹配到的作为一个结果, 然后继续向后匹配, 在匹配到一段满足正则表达式的子字符串又作为一个结果, 直到找不出满足正则表达式的结果为止. 换言之, 就是一个子字符串尽量往少了匹配.
非贪婪匹配需要在量词后面使用?进行修饰
```

**2.4 分组与或的使用**

```python
# 分组
(1).分组: 是在正则表达式中使用()将正则表达式的一部分括起来表示一部分
(2).作用: 
    改变优先级 *****
    分组引用
    
    
# 或的使用: 用"|"分隔的正则表达式, 代表按照|两边的正则表达式进行匹配都行

import re
email=input("请输入你的邮箱")
# 一个小括号代表一组
# 在正则表达式中使用（）将正则表达式的一部分括起来表示一部分
# 改变优先级
ret=re.match(r'^([a-zA-Z0-9]){4,20}@(163|qq|126)\.com$',email)
if ret:
    print(ret.group(1))  #group 后的参数能够获取分组里内容
else:
    print('不符合')
```

### 3.re模块的使用

```python
# 匹配方法
1.re.findall()
语法: re.findall(r'expression', str)
作用: 扫描整个字符串, 以列表形式返回所有匹配到的结果
    
2.re.search()
语法: re.search(r'expression', str)
作用: 从头开始扫描字符串, 匹配到一个结果就立即返回该结果对象, 使用group()进行取值, 如果匹配不到结果则返回None.

3.re.match()
语法:re.match(r'expression', str)
作用: 从字符串开头进行匹配, 如果开头就不符合则匹配不到结果返回None, 如果匹配到结果后返回一个对象, 使用group进行取值
    

import re
# # re.search(正则表达式，字符串)
str1='阅读数为9999，点赞量为100'
# # 匹配字符串的数字
ret=re.search(r'\d+',str1)
ret2=re.search(r'\d+',str1)
ret1=re.findall(r'\d+',str1)
print(ret.group()) #9999
print(ret2.group()) #9999
print(ret1)  #['9999', '100']
```

---

## **三、总结**

```python
1.正则概念及使用场景
# 正则概念
正则用于从字符串中提取子字符串使用
正则表达式是一门单独的科学, 不属于python独有, 其他语言中也可以使用正则

# 正则表达式使用场景
表单验证(手机号验证, 账号验证, 密码验证, 邮箱验证)
爬虫

2.正则基础语法
# 常用元字符
(1) .(点): 匹配任意字符, 换行符除外\n ****
(2) []: 字符组, 一些特殊的字符组如下: ****
    [a-z]: a到z的任意小写字母
    [A-Z]: A到Z的任意大写字母
    [0-9]: 0到9的任意数字
(3) \d: 匹配任意数字  *****
(4) \w: 匹配数字字母下划线 ****
(5) ^: 以什么开头  *****
(6) $: 以什么结尾  *****
# 常用量词
*: 匹配0个或无数个
+: 匹配1次或无数个
?: 匹配1个或0个
# 贪婪与非贪婪
(1).贪婪匹配是指在正则匹配的过程中尽量往多了匹配, 正则表达式默认是贪婪匹配.
(2).非贪婪匹配是指一旦满足正则表达式,就将匹配到的作为一个结果, 就是一个子字符串尽量往少了匹配.非贪婪匹配需要在量词后面使用?进行修饰

3.正则接口模块
- re.findall(r'expression', str): 扫描整个字符串, 以列表形式返回所有匹配到的结果
- re.search(r'expression', str): 从头开始扫描字符串, 匹配到一个结果就立即返回该结果对象, 使用group()进行取值, 如果匹配不到结果则返回None.
- re.match(r'expression', str): 从字符串开头进行匹配, 如果开头就不符合则匹配不到结果返回None, 如果匹配到结果后返回一个对象, 使用group进行取值
```



